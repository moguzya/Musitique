<?xml version="1.0" encoding="UTF-8"?>
<!--
  - Created by Osman Balci on 2021.5.19
  - Copyright Â© 2021 Osman Balci. All rights reserved.
  -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<!-- Do not enter tags before the composition line since they are ignored by JSF -->
<ui:composition>
    <h:form>
        <table border="0" cellspacing="0" cellpadding="10" width="100%">
            <tr>
                <!--
                **********************************
                Column 1 (Left): Movies Logo Image
                **********************************
                -->
                <td align="left" valign="middle" style="width:154px;">
                    <!--
                    Use EL to reference the image file since it will be accessed from all UI pages.
                    Column width = Logo Image Width
                    -->
                    <h:link outcome="/index">
                        <img src="#{resource['images:moviesLogo.png']}"
                             style="height:64px; width:auto; float:left; padding-left:10px; border:none;"
                             alt="Movies Logo" />
                    </h:link>
                </td>

                <!--
                ***************************
                Column 2 (Center): App Name
                ***************************
                -->
                <td align="center" valign="middle">
                    <span class="headerTitle">Movies</span>
                </td>

                <!--
                ***************************************
                Column 3 (Right): Hamburger Menu Button
                ***************************************
                -->
                <td align="right" valign="middle" style="width:100px;">
                    <div style="padding-right:10px">
                        <p:commandButton id="dynaButton" value="Menu" type="button" icon="pi pi-bars"/>
                        <p:menu overlay="true" trigger="dynaButton" my="left top" at="left bottom" style="white-space: nowrap;">
                            <p:menuitem value="Home" outcome="/index" icon="fas fa-home"/>
                            <p:menuitem value="Favorite Movies" outcome="/movieFavorites/List" icon="fas fa-list"/>
                            <p:menuitem value="Movies Now Playing" outcome="/moviesNowPlaying/MoviesNowPlaying" icon="fas fa-film"/>
                            <p:menuitem value="Current Movie Posters" outcome="/moviesNowPlaying/MoviePosters" icon="fas fa-image"/>
                            <p:menuitem value="Search Movies" onclick="PF('MovieSearchDialog').show();return false;" icon="fas fa-search"/>
                        </p:menu>
                    </div>
                </td>
            </tr>
        </table>
    </h:form>

    <!--
     ====================================================================================
     |  Selecting MOVIE SEARCH from the hamburger menu displays this Dialog window for  |
     |  the user to enter a search query and click the Search button to search for it.  |
     ====================================================================================
     -->
    <p:dialog id="MovieSearchDlg" header="Search Movies" responsive="true" position="center center"
              widgetVar="MovieSearchDialog" modal="true" resizable="false" appendTo="@(body)" >

        <h:form id="searchDialogForm">
            <div align="center">
                <br />
                <h:outputLabel for="searchQueryField" value="Enter Movie Name to Search:" />
                <br /><br />

                <!--
                The search query entered by the user in the inputText field is set to be
                the value of the searchQuery property of the searchedMovieController
                CDI @Named bean by using the Expression Language.
                -->
                <h:inputText id="searchQueryField" style="width:400px"
                             value="#{searchedMovieController.searchQuery}" >
                </h:inputText>
                <br /><br /><br />

                <!--  SEARCH button:
                Clicking the Search button invokes the performSearch() method of the
                searchedMovieController CDI @Named bean. The performSearch() method executes
                the search for the searchQuery property value and at the end of the execution with

                    return "MovieSearchResults?faces-redirect=true";

                it returns "MovieSearchResults" as the name of the XHTML file to display.
                -->
                <p:commandButton id="searchButton" value="Search" icon="fas fa-search" styleClass="rounded-button"
                                 ajax="false" action="#{searchedMovieController.performSearch()}" />
                &nbsp;&nbsp;

                <!-- CANCEL button -->
                <p:commandButton value="Cancel" icon="fas fa-ban" styleClass="ui-button-outlined"
                                 immediate="true" onclick="PF('MovieSearchDialog').hide()" />
                <br /><br />
            </div>
        </h:form>

    </p:dialog>

</ui:composition>
<!-- Do not enter tags before the composition line since they are ignored by JSF -->

</html>
